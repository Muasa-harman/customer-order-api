services:
  - type: web
    name: customer-order-api
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn customer_order_api.wsgi:application --bind 0.0.0.0:$PORT"
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: customer_order_api.settings
      - fromDatabase:
          name: customer-order-db
          property: connectionString
          key: postgresql://donfiles_online:QAnaEutatJb6hfUivSMrP2P4lbbZnjVk@dpg-d0369b9r0fns73am5te0-a/customer_order_service





# services:
# #  web:
# #    build: .
# #    command: python api/manage.py runserver 0.0.0.0:8000
# #    volumes:
# #      - .:/app
# #    ports:
# #      - "8000:8000"
# #    env_file:
# #      - .env
# #    depends_on:
# #      - db

#   db:
#     image: postgres:14
#     volumes:
#       - postgres_data:/var/lib/postgresql/data/
#     environment:
#       POSTGRES_DB: customer-order-service
#       POSTGRES_USER: postgres
#       POSTGRES_PASSWORD: donfiles.online

#   keycloak:
#     image: quay.io/keycloak/keycloak:26.0.1   
#     container_name: keycloak
#     command: start-dev
#     environment:
#       KC_DB: postgres
#       KC_DB_URL_HOST: db
#       KC_DB_URL_DATABASE: postgres
#       KC_DB_USERNAME: postgres
#       KC_DB_PASSWORD: donfiles.online
#       KEYCLOAK_ADMIN: admin
#       KEYCLOAK_ADMIN_PASSWORD: admin
#     ports:
#       - "8080:8080"
#     depends_on:
#       - db


# volumes:
#   postgres_data:
